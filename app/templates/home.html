{% extends 'layout.html' %}
{% block content %}
    <div class="container">

        <table
            id="table"
            data-toggle="table"
            data-ajax="ajaxRequest4"
            data-height="600"
            data-buttons-align="right"
            data-show-button-text="true"
            data-search="true"
            data-search-align="right"
            data-search-accent-neutralise="true"
            data-search-on-enter-key="false"
            data-search-text=""
            data-search-time-out="2000"
            visible-search="true"
            data-sort-reset="false"
            data-silent-sort="true"
            data-side-pagination="server"
            data-pagination="true"
            data-pagination-pre-text="Previous"
            data-pagination-next-text="Next"
            data-pagination-successively-size="3"
            data-pagination-v-align="bottom"
            data-show-pagination-switch="false"
            data-show-extended-pagination="false"
            data-remember-order="true"
            data-show-columns="true"
            data-show-columns-search="true"
            data-show-columns-toggle-all="true"
            data-show-header="true"
            data-show-footer="false"
            data-show-fullscreen="true"
            data-show-refresh="false"
            data-show-toggle="true"
            data-smart-display="true"
            data-undefined-text="-"
            data-virtual-scroll="true"
            data-addrbar="true"
            data-show-export="true"
            data-export-data-type="basic"


            >
            <thead>
                <tr>
                    <!-- <th data-field="id">ID</th>
                    <th data-field="name">Item Name</th>
                    <th data-field="price">Item Price</th>
                    <th data-field="dfp_ad_units" data-sortable="true" data-sort-order="desc">Ad Unit</th>
                    <th data-field="ad_requests" data-sortable="true">Ad Requests</th>
                    <th data-field="estimated_revenue" data-sortable="true">Estimated Revenue ($)</th>
                    <th data-field="eb_revenue" data-sortable="true">EB Revenue ($)</th>
                    loanamount,city,state,zip,naicscode,businesstype,raceethnicity,gender,veteran,nonprofit,jobsretained,dateapproved,lender,cd
                    -->
                    <th data-field="loanamount" data-sortable="true" data-formatter="amountFormatter" data-sort-order="desc">Loan Amount</th>
                    <th data-field="city" data-sortable="true">City</th>
                    <th data-field="state" data-sortable="true">State</th>
                    <th data-field="zip" data-sortable="true">Zip Code</th>
                    <th data-field="naicscode" data-sortable="true">NAICS Code</th>
                    <th data-field="businesstype" data-sortable="true">Business Type</th>
                    <th data-field="raceethnicity" data-sortable="true">Race &#47; Ethnicity</th>
                    <th data-field="gender" data-sortable="true">Gender</th>
                    <th data-field="veteran" data-sortable="true">Veteran</th>
                    <th data-field="nonprofit" data-sortable="true">Nonprofit</th>
                    <th data-field="jobsretained" data-sortable="true">Jobs Retained</th>
                    <th data-field="dateapproved" data-sortable="true">Date Approved</th>
                    <th data-field="lender" data-sortable="true">Lender</th>
                    <th data-field="cd" data-sortable="true">Congressional District</th>
                </tr>
            </thead>
        </table>

        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
        <script src="https://unpkg.com/bootstrap-table@1.17.1/dist/bootstrap-table.min.js"></script>
        <script src="https://unpkg.com/bootstrap-table@1.17.1/dist/extensions/addrbar/bootstrap-table-addrbar.min.js"></script>
        <script src="https://unpkg.com/bootstrap-table@1.17.1/dist/extensions/export/bootstrap-table-export.js"></script>

        <script>
            // your custom ajax request here
            //
            // Data is successfully input in table here from a local static source
            //
            //
            function ajaxRequest4(params) {
            var url = '/params'
            console.log("PARAMS REQUEST HERE:")
            console.log(params)
            console.log(url + '?' + $.param(params.data))
            $.get(url + '?' + $.param(params.data)).then(function (res) {
                params.success(res)
                console.log(res)
            })
        ;
            }

            function amountFormatter(value) {
                return value.substring(0, value.length - 3)
            }

            var $table = $('#table');
            $('#table').bootstrapTable({
                exportOptions: {
                    fileName: 'custom_file_name'
                }
            });
            $(function () {
                var $table = $('#table');
                $('#table').bootstrapTable({
                exportOptions: {
                    fileName: 'custom_file_name'
                }
            });
            });



        </script>
    </div>
{% endblock content %}


<!-- var url = '/fetch'
var url= "https://examples.wenzhixin.net.cn/examples/bootstrap_table/data" -->





<!-- <h1>Btn2</h1>
<div id='p2'></div>
<button id="btn2"> Button2</button>
<script type="text/javascript">
    document.getElementById('btn2').addEventListener('click', consoleLog);

    function consoleLog(){
        console.log('Clicked it')
        var xhr = new XMLHttpRequest();

        xhr.open('GET', '/data', true);

        xhr.onload = function(){
            if(this.status == 200){
                console.log(this.responseText)
                document.getElementById('p2').innerHTML = 
                this.responseText;
            }
        }

        xhr.send();
    }
</script>

<h1>Btn3</h1>
<div id='p3'></div>
<button id="btn3"> Button3</button>
<script type="text/javascript">
    document.getElementById('btn2').addEventListener('click', consoleLog);

    function consoleLog(){
        console.log('Clicked it')
        // your custom ajax request here
        function ajaxRequest40() {
            var url = '/data'
            $.get(url).then(function (res) {
                params.success(res)
                console.log($.get(url))
        })
    ;
        }
    }
</script> -->